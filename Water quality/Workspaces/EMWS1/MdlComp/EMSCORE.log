*------------------------------------------------------------*
* Score Log
Date:                December 03, 2022
Time:                03:30:01
*------------------------------------------------------------*
NOTE: View EMWS1.AUTONEURAL_TRAIN.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      
NOTE: View EMWS1.AUTONEURAL_TRAIN.VIEW used (Total process time):
      real time           0.15 seconds
      cpu time            0.14 seconds
      
12607  /* Generate assessment metadata, which will be used to generate assessment data step */
12608  /* code, such as retrieving names of temporary variables and summary variables,      */
12609  /* labels, etc.  It is used in almost all the assessment computations such as lift,  */
12610  /* roc, index, scoreDist and could be thought as a global variable in assessment     */
12611  /* computation.                                                                      */
12612  data work.ASSESS_0ANL1L2_assessMeta_liJDO8;
12613  length VARIABLE $32 FORMAT $44 TYPE $32 PARENT $32 LEVEL $32 PROPERTY $32 MEASUREMENT $10 LAST_LEVEL $32 GEN_VAR_IN_TEMP_DATA $32 RESULT_MEAN $32 RESULT_MEAN_LABEL $100 RESULT_MIN $32 RESULT_MIN_LABEL $100 MIN_ADJUSTED $32 RESULT_MAX $32
12613! RESULT_MAX_LABEL
12614     $100 MAX_ADJUSTED $32 RESULT_COUNT $32 RESULT_COUNT_LABEL $100 TEMPORARY_VARIABLE $32;
12615  VARIABLE = "Potability";
12616  PARENT = "";
12617  FORMAT = "";
12618  TYPE = "";
12619  LEVEL = '';
12620  PROPERTY = "TARGET";
12621  MEASUREMENT = "BINARY";
12622  LAST_LEVEL = '';
12623  GEN_VAR_IN_TEMP_DATA = "Potability";
12624  RESULT_MEAN = "";
12625  RESULT_MEAN_LABEL = "";
12626  RESULT_MIN = "";
12627  RESULT_MIN_LABEL = "";
12628  MIN_ADJUSTED = "";
12629  RESULT_MAX = "";
12630  RESULT_MAX_LABEL = "";
12631  MAX_ADJUSTED = "";
12632  RESULT_COUNT = "";
12633  RESULT_COUNT_LABEL = "";
12634  TEMPORARY_VARIABLE = "Potability_FPBQHxhRse2Up62";
12635  output;
12636  VARIABLE = "F_Potability_1";
12637  FORMAT = "";
12638  TYPE = "";
12639  PARENT = "F_Potability";
12640  LEVEL = "1";
12641  PROPERTY = "TARGET_LEVEL";
12642  MEASUREMENT = "INTERVAL";
12643  LAST_LEVEL = "0";
12644  GEN_VAR_IN_TEMP_DATA = "F_Potability_1_2wh4xaoBY3N8JiP";
12645  RESULT_MEAN = "F_Potabili_mean_2f_WwPLTAjm1X_7";
12646  /* adjust for tied cases */
12647  RESULT_MEAN_LABEL = "";
12648  RESULT_MIN = "";
12649  RESULT_MIN_LABEL = "";
12650  RESULT_MAX = "";
12651  RESULT_MAX_LABEL = "";
12652  RESULT_COUNT = "NumberOfEvents";
12653  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
12654  TEMPORARY_VARIABLE = "F_Potability_1_BdeSGVAmD5xnZRD";
12655  output;
12656  VARIABLE = "F_Potability_0";
12657  FORMAT = "";
12658  TYPE = "";
12659  PARENT = "F_Potability";
12660  LEVEL = "0";
12661  PROPERTY = "TARGET_LEVEL";
12662  MEASUREMENT = "INTERVAL";
12663  LAST_LEVEL = "0";
12664  GEN_VAR_IN_TEMP_DATA = "F_Potability_0_42vx1sydXD5ccdg";
12665  RESULT_MEAN = "F_Potabili_mean_F_IWNLgoBC3cJOU";
12666  /* adjust for tied cases */
12667  RESULT_MEAN_LABEL = "";
12668  RESULT_MIN = "";
12669  RESULT_MIN_LABEL = "";
12670  RESULT_MAX = "";
12671  RESULT_MAX_LABEL = "";
12672  RESULT_COUNT = "NumberOfEvents";
12673  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
12674  TEMPORARY_VARIABLE = "F_Potability_0_eI3Y0SeFzWCtQ7x";
12675  output;
12676  VARIABLE = "P_Potability1";
12677  FORMAT = "";
12678  TYPE = "";
12679  PARENT = "";
12680  LEVEL = "1";
12681  PROPERTY = "POSTERIOR_LEVEL";
12682  MEASUREMENT = "INTERVAL";
12683  LAST_LEVEL = "";
12684  GEN_VAR_IN_TEMP_DATA = "P_Potability1";
12685  RESULT_MEAN = "_meanP_";
12686  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
12687  RESULT_MIN = "_minP_";
12688  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
12689  MIN_ADJUSTED = "P_Potabi_minAdjusted_58YpbixsM";
12690  RESULT_MAX = "_maxP_";
12691  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
12692  MAX_ADJUSTED = "P_Potabi_maxAdjusted_dJnUMxcAE";
12693  RESULT_COUNT = "";
12694  RESULT_COUNT_LABEL = "";
12695  TEMPORARY_VARIABLE = "P_Potability1_Rqa6Xni7p2da3bS";
12696  output;
12697  VARIABLE = "P_Potability0";
12698  FORMAT = "";
12699  TYPE = "";
12700  PARENT = "";
12701  LEVEL = "0";
12702  PROPERTY = "POSTERIOR_LEVEL";
12703  MEASUREMENT = "INTERVAL";
12704  LAST_LEVEL = "";
12705  GEN_VAR_IN_TEMP_DATA = "P_Potability0";
12706  RESULT_MEAN = "_meanP_";
12707  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
12708  RESULT_MIN = "_minP_";
12709  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
12710  MIN_ADJUSTED = "P_Potabi_minAdjusted_Ko724BZfM";
12711  RESULT_MAX = "_maxP_";
12712  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
12713  MAX_ADJUSTED = "P_Potabi_maxAdjusted_wlPGI5qtL";
12714  RESULT_COUNT = "";
12715  RESULT_COUNT_LABEL = "";
12716  TEMPORARY_VARIABLE = "P_Potability0_jnKqHid2VDZdz0_";
12717  output;
12718  run;

NOTE: The data set WORK.ASSESS_0ANL1L2_ASSESSMETA_LIJDO8 has 5 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

12719  /* Generate temporary dataset and obtain summary statistics such as total number of   */
12720  /* obserations, frequency of target.  However, summary statistics for class reporting */
12721  /* variabels are not computed here since if there exist class reporting variables,    */
12722  /* then PROC DMDB will be called. And there is no need to compute interval reporting  */
12723  /* summary statisitcs, if any.                                                        */
12724  data work.ASSESS_0ANL1L2_normSD_iZVWja(drop=
12725  _numberOfObservation_
12726  _levelFrequency_1
12727  _levelFrequency_2
12728  )
12729  work.ASSESS_0ANL1L2_meansAndTi_9oybxb (keep=
12730  _numberOfObservation_
12731  _levelFrequency_1
12732  _levelFrequency_2
12733  );
12734  set EMWS1.AutoNeural_TRAIN(
12735  where=(
12736  (Potability ^= .)
12737  )
12738  ) end=_lastObservation_;
12739  keep frequency_GzePmy;
12740  frequency_GzePmy = 1;
12741  keep I_Potability F_Potability;
12742  keep F_Potability_1_2wh4xaoBY3N8JiP;
12743  if (F_Potability = '1') then do;
12744  F_Potability_1_2wh4xaoBY3N8JiP = 1;
12745  end;
12746  else do;
12747  F_Potability_1_2wh4xaoBY3N8JiP = 0;
12748  end;
12749  keep F_Potability_0_42vx1sydXD5ccdg;
12750  if (F_Potability = '0') then do;
12751  F_Potability_0_42vx1sydXD5ccdg = 1;
12752  end;
12753  else do;
12754  F_Potability_0_42vx1sydXD5ccdg = 0;
12755  end;
12756  keep P_Potability1;
12757  keep P_Potability0;
12758  output work.ASSESS_0ANL1L2_normSD_iZVWja;
12759  keep _numberOfObservation_;
12760  retain _numberOfObservation_ 0;
12761  _numberOfObservation_ + frequency_GzePmy;
12762  keep _levelFrequency_1;
12763  retain _levelFrequency_1 0;
12764  if (F_Potability = '1') then do;
12765  _levelFrequency_1 + frequency_GzePmy;
12766  end;
12767  keep _levelFrequency_2;
12768  retain _levelFrequency_2 0;
12769  if (F_Potability = '0') then do;
12770  _levelFrequency_2 + frequency_GzePmy;
12771  end;
12772  if _lastObservation_ then do;
12773  output work.ASSESS_0ANL1L2_meansAndTi_9oybxb;
12774  end;
12775  run;

NOTE: There were 2619 observations read from the data set EMWS1.PART_TRAIN.
NOTE: View EMWS1.AUTONEURAL_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
NOTE: There were 2619 observations read from the data set EMWS1.STAT_TRAIN.
NOTE: There were 2619 observations read from the data set EMWS1.AUTONEURAL_TRAIN.
      WHERE Potability not = .;
NOTE: The data set WORK.ASSESS_0ANL1L2_NORMSD_IZVWJA has 2619 observations and 7 variables.
NOTE: The data set WORK.ASSESS_0ANL1L2_MEANSANDTI_9OYBXB has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

12776  data WORK._EMRANK;
12777  set EMWS1.MdlComp_EMRANK;
12778  where MODEL = "AutoNeural" and TARGET = "Potability" and dataRole="TRAIN";
12779  run;

NOTE: There were 20 observations read from the data set EMWS1.MDLCOMP_EMRANK.
      WHERE (MODEL='AutoNeural') and (TARGET='Potability') and (dataRole='TRAIN');
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12780  data work._augment;
12781  do BIN= 1 to 20;
12782  DECILE = BIN*5;
12783  output;
12784  end;
12785  run;

NOTE: The data set WORK._AUGMENT has 20 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12786  data WORK._EMRANK;
12787  merge WORK._AUGMENT WORK._EMRANK;
12788  by BIN;
12789  run;

NOTE: There were 20 observations read from the data set WORK._AUGMENT.
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12790  data WORK._EMRANK;
12791  set WORK._EMRANK end=_lastObservation_;
12792  retain _previousMinP_ _previousMaxP_;
12793  retain _group_ 1;
12794  keep event;
12795  keep bin _cutoff_ _group_;
12796  if (bin > 1) then do;
12797  bin = bin - 1;
12798  _cutoff_ = (_maxP_ + _previousMinP_) / 2;
12799  if (abs(_previousMaxP_ - _previousMinP_) < 1E-6) then do;
12800  /* tied */
12801  _cutoff_ = max((_minP_ + _maxP_)/2, min(_cutoff_, _previousMinP_/*-1E-6*/
12802  ));
12803  end;
12804  else if (abs(_maxP_ - _minP_) < 1E-6) then do;
12805  /* next tied */
12806  _cutoff_ = min((_previousMinP_ + _previousMaxP_)/2, max(_cutoff_, _maxP_/*+ 1E-6*/
12807  ));
12808  end;
12809  output;
12810  *if ( abs((_maxP_ +_minP_)/2 - (_previousMaxP_ + _previousMinP_)/2) > 1E-6) then do;
12811  * _group_ + 1;
12812  *end;
12813  if (_maxP_ le _previousMinP_ - 1E-6) then do;
12814  _group_ + 1;
12815  end;
12816  else if (abs(_maxP_ - _previousMinP_) < 1E-6) then do;
12817  if (abs(_maxP_ - _minP_) > 1E-6) then do;
12818  _group_ + 1;
12819  end;
12820  end;
12821  bin + 1;
12822  /* correct the previous change */
12823  end;
12824  if (_lastObservation_) then do;
12825  _cutoff_ = .;
12826  output;
12827  end;
12828  _previousMinP_ = _minP_;
12829  _previousMaxP_ = _maxP_;
12830  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12831  data WORK._EMRANK;
12832  set WORK._EMRANK;
12833  by _group_;
12834  retain _start_;
12835  if (first._group_) then do;
12836  _start_ = _n_;
12837  end;
12838  if (last._group_) then do;
12839  _end_ = _n_;
12840  output;
12841  end;
12842  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
12843  filename emflow "C:\Users\sbattina\Desktop\Water quality\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
12844  *------------------------------------------------------------*;
12845  * MdlComp: Scoring AUTONEURAL_TRAIN data;
12846  *------------------------------------------------------------*;
12847  data EMWS1.MdlComp_TRAIN
12848  / view=EMWS1.MdlComp_TRAIN
12849  ;
12850  set EMWS1.AutoNeural_TRAIN
12851  ;
12852  %inc emflow;
12932  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.AUTONEURAL_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.06 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

12933  quit;
12934  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

12935  filename emflow "C:\Users\sbattina\Desktop\Water quality\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
12936  *------------------------------------------------------------*;
12937  * MdlComp: Scoring AUTONEURAL_TEST data;
12938  *------------------------------------------------------------*;
12939  data EMWS1.MdlComp_TEST
12940  / view=EMWS1.MdlComp_TEST
12941  ;
12942  set EMWS1.AutoNeural_TEST
12943  ;
12944  %inc emflow;
13024  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TEST.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.AUTONEURAL_TEST.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

13025  quit;
13026  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

13027  *------------------------------------------------------------*;
13028  * MdlComp: Computing metadata for TRAIN data;
13029  *------------------------------------------------------------*;

NOTE: View EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.11 seconds
      cpu time            0.12 seconds
      
NOTE: View EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds
      
NOTE: View EMWS1.MDLCOMP_TEST.VIEW used (Total process time):
      real time           0.11 seconds
      cpu time            0.12 seconds
      
